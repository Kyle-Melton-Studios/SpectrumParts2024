---
import Layout from "../layouts/Layout.astro";

const res = await fetch(
    "https://script.googleusercontent.com/macros/echo?user_content_key=5jq55Ckw472bdTrbK7mHl9rd-PLw151IR4XMiW0prSD1OeJHLMsGhgn90RiNrcnJDe_iivlJzISfnBWFoSJwWgyqkQ7m2n7Em5_BxDlH2jW0nuo2oDemN9CCS2h10ox_1xSncGQajx_ryfhECjZEnIqQdB0WRLZ7vUkU5-J14b9Npo_TRLuLQhmCyy3IuKbRPa-nRDCmpTKavXEpYuVXwDNPgfuOg_4AaXRwJMibXb88qUMwE_cr5dz9Jw9Md8uu&lib=Mx9yd2PD5TG0oEm5opb-qy50PVyrfBjS_",
    {
      method: "GET",
      headers: {
        "Content-Type": "application/json",
      },
    }
  );
  const items = await res.json();
  const parts = await items.data;
  const data = await items.data;
  const rows = await items.row_count;
  const savedProducts = [];

---

<Layout title="Catalog | Spectrum Parts and Components">
  <main>
    <h1 class="text-center mt-2 text-2xl font-bold text-white">
      Parts Catalog
    </h1>

    <div class="flex justify-center">
      <div class="mb-3 grid grid-cols-3 sm:grid-cols-3 gap-4">
        <div></div>
        <div
          class="xl:w-96 relative flex flex-wrap items-stretch w-full mb-4 mt-4"
        >
          <input
            type="search"
            class="form-control relative inline min-w-0 w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
            placeholder="Search a Part Number or Part Description"
            aria-label="Search"
            aria-describedby="button-addon2"
          />
        </div>
        <div class="hidden sm:block mx-auto text-center">
          <p class="text-white mt-1 text-center mx-auto">
            Showing parts: {parts.length} of {rows}
          </p>
        </div>
      </div>
      <div class="mt-5 ml-auto">
        <label for="my-modal" class="">
          <span class="text-white">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width={2}
              stroke="currentColor"
              class="w-6 h-6 inline"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"
              ></path>
            </svg>
          </span>
          <div class="-ml-1 badge badge-lg p-2 bg-yellow-600 text-white">
            {savedProducts.length}
          </div>
        </label>
      </div>
    </div>
  </main>

  <div
    class="overflow-x-auto max-w-6xl relative mx-auto shadow-md sm:rounded-lg"
  >
    <table class="w-full text-sm text-left text-gray-500 mb-16">
      <thead class="text-xs text-gray-700 uppercase bg-gray-100">
        <tr>
          <th scope="col" class="py-3 px-6"> Save</th>
          <th scope="col" class="py-3 px-6"> Part Number</th>
          <th scope="col" class="py-3 px-6"> Description</th>
          <th scope="col" class="py-3 px-6"> Short Description</th>
          <th scope="col" class="py-3 px-6"> OEM</th>
          <th scope="col" class="py-3 px-6 text-center"> Availability</th>
        </tr>
      </thead>
      <tbody>
        {
          parts.map((part) => (
            <tr class="bg-white border-b hover:bg-gray-200">
              <td class="py-3 px-6">
                {savedProducts.includes(part) ? (
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width={2}
                    stroke="currentColor"
                    class="w-6 h-6 text-green-500"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                ) : (
                  <button
                    class=""
                   
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke-width={1.5}
                      stroke="currentColor"
                      class="w-6 h-6"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"
                      />
                    </svg>
                  </button>
                )}
              </td>
              <td class="py-3 px-6">{part.PartName}</td>
              <td class="py-3 px-6">{part.PartNumber}</td>
              <td class="py-3 px-6">{part.Description}</td>
              <td class="py-3 px-6">{part.ShortDescription}</td>
              <td class="py-3 px-6 text-center">
                <a
                  href={`/catalog/${part.PartNumber}`}
                  class="focus:outline-none text-blue-900 bg-yellow-500 hover:bg-yellow-600 focus:ring-4 focus:ring-yellow-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:focus:ring-yellow-900"
                >
                  <button class=" hidden sm:inline">
                    Contact for Availability
                  </button>
                  <button class=" sm:hidden">Contact</button>
                </a>
              </td>
            </tr>
          ))
        }
      </tbody>
    </table>
  </div>
  <div class="footer fixed bottom-0 right-0 left-0 flex">
    <div class="blue cssBG"></div>
    <div class="yellow cssBG"></div>
    <div class="center text-center pt-2"></div>
  </div>
  <script is:inline>

  </script>
</Layout>
